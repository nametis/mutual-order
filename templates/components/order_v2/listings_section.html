<!-- My Discs Section -->
<div x-show="myListings.length > 0" class="bg-white rounded-lg shadow p-4 sm:p-6 mt-6">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4">
        <h3 class="flex items-center space-x-2 text-lg sm:text-xl font-bold text-gray-900">
            <span class="bg-yellow-100 px-3 py-1 rounded-full">
                <span>üíø</span>
                <span>Mes disques</span>
            </span>
        </h3>
        <button x-show="order.status === 'building'" @click="verifyAvailability()"
                class="flex items-center space-x-1 px-3 py-1 border border-dashed border-gray-400 rounded-full text-gray-600 hover:bg-gray-50 text-xs transition-colors self-start">
            <span>üîÑ</span>
            <span>V√©rifier dispo</span>
        </button>
    </div>
    
    <!-- Horizontal Scrolling Container -->
    <div class="overflow-x-auto">
        <div class="min-w-full bg-white rounded-lg shadow overflow-hidden">
            <table class="min-w-full" style="min-width: 800px;">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Pochette</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Titre</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Prix</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">√âtat Vinyle</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">√âtat Pochette</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <template x-for="listing in myListings" :key="listing.id">
                        <tr>
                            <td class="px-4 sm:px-6 py-4">
                                <img x-show="listing.image_url" :src="listing.image_url" 
                                     class="w-12 h-12 sm:w-16 sm:h-16 object-cover rounded flex-shrink-0">
                                <div x-show="!listing.image_url" 
                                     class="w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded flex items-center justify-center flex-shrink-0">
                                    <span class="text-gray-400">?</span>
                                </div>
                            </td>
                            <td class="px-4 sm:px-6 py-4 whitespace-nowrap">
                                <div class="font-medium text-gray-900 max-w-xs truncate" x-text="listing.title"></div>
                                <div class="text-sm text-gray-500" x-text="'ID: ' + listing.discogs_id"></div>
                            </td>
                            <td class="px-4 sm:px-6 py-4 text-sm text-gray-900 whitespace-nowrap font-medium" x-text="listing.price_value.toFixed(2) + '‚Ç¨'"></td>
                            <td class="px-4 sm:px-6 py-4">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap"
                                      :class="getConditionClass(listing.media_condition)"
                                      x-text="getShortCondition(listing.media_condition)"></span>
                            </td>
                            <td class="px-4 sm:px-6 py-4">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap"
                                      :class="getConditionClass(listing.sleeve_condition)"
                                      x-text="getShortCondition(listing.sleeve_condition)"></span>
                            </td>
                            <td class="px-4 sm:px-6 py-4 text-sm text-gray-900 whitespace-nowrap" x-text="listing.username"></td>
                            <td class="px-4 sm:px-6 py-4">
                                <div class="flex items-center space-x-2 whitespace-nowrap">
                                    <a :href="listing.listing_url" target="_blank"
                                       class="p-2 text-gray-600 rounded-full hover:bg-gray-100 transition-colors"
                                       title="Voir sur Discogs">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
                                            <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
                                        </svg>
                                    </a>
                                    <button x-show="order.status === 'building' && (listing.user_id === currentUserId || order.creator_id === currentUserId || isAdmin)" 
                                            @click="removeListing(listing.id)"
                                            class="p-2 text-red-600 rounded-full hover:bg-red-100 transition-colors"
                                            title="Retirer le disque">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 11-2 0v6a1 1 0 112 0V8z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Mobile scroll hint -->
    <div class="sm:hidden text-center text-xs text-gray-500 mt-2">
        ‚Üê Glissez pour voir plus de colonnes ‚Üí
    </div>
</div> rounded flex items-center justify-center flex-shrink-0">
                                    <span class="text-gray-400">?</span>
                                </div>
                            </td>
                            <td class="px-4 sm:px-6 py-4 whitespace-nowrap">
                                <div class="font-medium text-gray-900 max-w-xs truncate" x-text="listing.title"></div>
                                <div class="text-sm text-gray-500" x-text="'ID: ' + listing.discogs_id"></div>
                            </td>
                            <td class="px-4 sm:px-6 py-4 text-sm text-gray-900 whitespace-nowrap font-medium" x-text="listing.price_value.toFixed(2) + '‚Ç¨'"></td>
                            <td class="px-4 sm:px-6 py-4">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap"
                                      :class="getConditionClass(listing.media_condition)"
                                      x-text="getShortCondition(listing.media_condition)"></span>
                            </td>
                            <td class="px-4 sm:px-6 py-4">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap"
                                      :class="getConditionClass(listing.sleeve_condition)"
                                      x-text="getShortCondition(listing.sleeve_condition)"></span>
                            </td>
                            <td class="px-4 sm:px-6 py-4">
                                <div class="flex items-center space-x-2 whitespace-nowrap">
                                    <a :href="listing.listing_url" target="_blank"
                                       class="p-2 text-gray-600 rounded-full hover:bg-gray-100 transition-colors"
                                       title="Voir sur Discogs">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
                                            <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
                                        </svg>
                                    </a>
                                    <button x-show="order.status === 'building'" @click="removeListing(listing.id)"
                                            class="p-2 text-red-600 rounded-full hover:bg-red-100 transition-colors"
                                            title="Retirer le disque">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 11-2 0v6a1 1 0 112 0V8z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Mobile scroll hint -->
    <div class="sm:hidden text-center text-xs text-gray-500 mt-2">
        ‚Üê Glissez pour voir plus de colonnes ‚Üí
    </div>
</div>

<!-- Other Discs Section -->
<div x-show="otherListings.length > 0" class="bg-white rounded-lg shadow p-4 sm:p-6 mt-6">
    <div class="flex items-center justify-between mb-4">
        <h3 class="flex items-center space-x-2 text-lg sm:text-xl font-bold text-gray-900">
            <span class="bg-yellow-100 px-3 py-1 rounded-full">
                <span>üéµ</span>
                <span>Les autres disques dans la commande</span>
            </span>
        </h3>
    </div>
    
    <!-- Horizontal Scrolling Container -->
    <div class="overflow-x-auto">
        <div class="min-w-full bg-white rounded-lg shadow overflow-hidden">
            <table class="min-w-full" style="min-width: 900px;">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Pochette</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Titre</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Prix</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">√âtat Vinyle</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">√âtat Pochette</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Ajout√© par</th>
                        <th class="px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <template x-for="listing in otherListings" :key="listing.id">
                        <tr>
                            <td class="px-4 sm:px-6 py-4">
                                <img x-show="listing.image_url" :src="listing.image_url" 
                                     class="w-12 h-12 sm:w-16 sm:h-16 object-cover rounded flex-shrink-0">
                                <div x-show="!listing.image_url" 
                                     class="w-12 h-12 sm:w-16 sm:h-16 bg-gray-100