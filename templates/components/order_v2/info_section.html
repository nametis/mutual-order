<!-- Combined Seller Info and Stats -->
<div class="bg-white rounded-lg shadow p-4 sm:p-6">
    
    <!-- Header line with seller info and actions - Desktop: single line, Mobile: wrapping -->
    <div class="flex flex-wrap items-baseline gap-2 sm:gap-4 mb-3" 
         x-data="{ hasFav: false, loadingFav: false, async init(){ try { const res = await fetch('/api/user/favorite_sellers'); if(res.ok){ const data = await res.json(); this.hasFav = (data.sellers||[]).some(s => s.seller_name === order.seller_name); } } catch(e){} } }">
        <!-- Favorite Star -->
        <button @click.prevent="if(loadingFav) return; loadingFav = true; (hasFav ? fetch('/api/user/favorite_sellers/' + encodeURIComponent(order.seller_name), { method: 'DELETE' }) : fetch('/api/user/favorite_sellers', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ seller: order.seller_name }) })).then(r => { if(r.ok){ hasFav = !hasFav; } }).catch(()=>{}).finally(()=>{ loadingFav = false; })"
                class="px-2 py-1 rounded-full border border-transparent hover:border-yellow-400 transition-colors"
                :title="hasFav ? 'Déjà en favoris' : 'Ajouter aux favoris'">
            <span class="text-lg" 
                  :class="hasFav ? 'text-yellow-500' : 'text-gray-400'"
                  x-text="'⭐'"></span>
        </button>
        
        <h1 class="text-xl sm:text-2xl font-bold text-gray-900 min-w-0" x-text="order.seller_name"></h1>
        
        <!-- Rating Badge -->
        <div x-show="sellerInfo.rating" class="flex items-center space-x-1 bg-gray-100 px-2 py-1 rounded-full">
            <span class="text-yellow-500">⭐</span>
            <span class="text-sm font-medium" x-text="sellerInfo.rating ? sellerInfo.rating.toFixed(0) + '%' : ''"></span>
        </div>
        
        <!-- Location Badge -->
        <div x-show="sellerInfo.location && sellerInfo.location !== 'Non spécifiée'" class="flex items-center space-x-1 text-gray-600 bg-gray-100 px-2 py-1 rounded-full">
            <span>📍</span>
            <span class="text-sm" x-text="sellerInfo.location"></span>
        </div>
        
        <!-- Action Buttons - Keep on same line on desktop, wrap on mobile -->
        <a :href="'https://www.discogs.com/user/' + order.seller_name" target="_blank" 
           class="flex items-center space-x-1 px-3 py-1 bg-white border border-black rounded-full text-black hover:bg-gray-50 text-xs transition-colors">
            <span>👤</span>
            <span>Profil Discogs</span>
        </a>
        
        <a x-show="order.direct_url" :href="order.direct_url" target="_blank"
           class="flex items-center space-x-1 px-3 py-1 bg-white border border-black rounded-full text-black hover:bg-gray-50 text-xs transition-colors">
            <span>🔗</span>
            <span>Site web du vendeur</span>
        </a>
    </div>

    <!-- Stats Grid - Responsive layout with specific ordering -->
    <div class="space-y-2">
        <!-- Mobile Layout: 2 columns with specific ordering -->
        <div class="grid grid-cols-2 gap-2 md:hidden">
            <!-- Row 1: discs, participants -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💿</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.available_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Disques</span>
            </div>
            
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">👥</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.participants_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Participants</span>
            </div>

            <!-- Row 2: time remaining, creator -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">🕒</span>
                    <span class="text-sm font-bold text-gray-900" 
                          x-text="order.deadline ? Math.max(0, Math.ceil((new Date(order.deadline) - new Date()) / (1000 * 60 * 60 * 24))) + 'j' : 'N/A'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Restants</span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">Créateur</span>
                <div class="flex items-center space-x-1">
                    <span class="text-sm">👑</span>
                    <a x-show="order.creator?.mutual_order_username" 
                       :href="'/@' + order.creator.mutual_order_username" 
                       class="text-sm font-bold text-blue-600 hover:text-blue-800 hover:underline" 
                       x-text="'@' + order.creator.mutual_order_username"></a>
                    <span x-show="!order.creator?.mutual_order_username" 
                          class="text-sm font-bold text-gray-900" 
                          x-text="order.creator?.username || 'N/A'"></span>
                </div>
            </div>

            <!-- Row 3: frais de port (2 columns) -->
            <div class="col-span-2 p-2 bg-gray-100 rounded flex flex-row min-h-[60px]">
                <div class="flex-1 flex items-center justify-center">
                    <div class="flex items-center space-x-1">
                        <span class="text-sm">📦</span>
                        <span class="text-sm font-medium text-gray-700">Frais de port :</span>
                    </div>
                </div>
                <div class="flex-1 flex items-center justify-center">
                    <div class="text-center">
                        <div class="text-lg font-bold text-gray-900" x-text="(order.shipping_cost + order.taxes).toFixed(2) + '€'"></div>
                        <div class="text-xs text-gray-500" 
                             x-text="order.available_count > 0 ? '(' + ((order.shipping_cost + order.taxes) / order.available_count).toFixed(2) + '€/disque)' : ''"></div>
                    </div>
                </div>
            </div>

            <!-- Row 4: city, discount -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">🏠 Localisation</span>
                <span class="text-sm font-bold text-gray-900" x-text="order.user_location || 'N/A'"></span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💸</span>
                    <span class="text-lg font-bold" 
                          :class="order.discount && order.discount > 0 ? 'text-green-600' : 'text-gray-400'"
                          x-text="order.discount && order.discount > 0 ? order.discount.toFixed(2) + '€' : '0€'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Discount</span>
            </div>

            <!-- Row 5: paiement, paypal.me -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">💳 Paiement</span>
                <span class="text-sm font-bold text-gray-700" x-text="order.payment_timing"></span>
            </div>

            <div class="p-2 rounded text-center flex flex-col items-center justify-center min-h-[60px]"
                 :class="order.paypal_link ? 'bg-blue-100 cursor-pointer hover:bg-blue-200' : 'bg-gray-100'"
                 @click="order.paypal_link ? window.open(order.paypal_link, '_blank') : null">
                <div x-show="order.paypal_link" class="flex flex-col items-center">
                    <svg class="w-4 h-4 mb-1" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.543-.676c-.95-1.09-2.754-1.38-4.61-1.38H8.89c-.524 0-.968.382-1.05.9L6.32 19.337h4.676l1.12-7.106c.082-.518.526-.9 1.05-.9h2.19c3.61 0 6.4-1.38 7.2-5.4.1-.5.2-1.1.2-1.7z"/>
                    </svg>
                    <span class="text-sm font-bold text-blue-600">PayPal.me</span>
                </div>
                <div x-show="!order.paypal_link" class="flex flex-col items-center">
                    <span class="text-xs font-medium text-gray-700 mb-1">PayPal.me</span>
                    <span class="text-sm font-bold text-gray-400">N/A</span>
                </div>
            </div>
        </div>

        <!-- Tablet Layout: 5 columns with specific ordering -->
        <div class="hidden md:grid xl:hidden grid-cols-5 gap-2">
            <!-- Row 1: discs, participants, time remaining, creator, paiement style -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💿</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.available_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Disques</span>
            </div>
            
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">👥</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.participants_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Participants</span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">🕒</span>
                    <span class="text-sm font-bold text-gray-900" 
                          x-text="order.deadline ? Math.max(0, Math.ceil((new Date(order.deadline) - new Date()) / (1000 * 60 * 60 * 24))) + 'j' : 'N/A'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Restants</span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">Créateur</span>
                <div class="flex items-center space-x-1">
                    <span class="text-sm">👑</span>
                    <a x-show="order.creator?.mutual_order_username" 
                       :href="'/@' + order.creator.mutual_order_username" 
                       class="text-sm font-bold text-blue-600 hover:text-blue-800 hover:underline" 
                       x-text="'@' + order.creator.mutual_order_username"></a>
                    <span x-show="!order.creator?.mutual_order_username" 
                          class="text-sm font-bold text-gray-900" 
                          x-text="order.creator?.username || 'N/A'"></span>
                </div>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">💳 Paiement</span>
                <span class="text-sm font-bold text-gray-700" x-text="order.payment_timing"></span>
            </div>

            <!-- Row 2: frais de port (2 columns), discount, city, paypal.me -->
            <div class="col-span-2 p-2 bg-gray-100 rounded flex flex-row items-center justify-between min-h-[60px]">
                <div class="flex items-center space-x-1">
                    <span class="text-sm">📦</span>
                    <span class="text-sm font-medium text-gray-700">Frais de port :</span>
                </div>
                <div class="text-right">
                    <div class="text-lg font-bold text-gray-900" x-text="(order.shipping_cost + order.taxes).toFixed(2) + '€'"></div>
                    <div class="text-xs text-gray-500" 
                         x-text="order.available_count > 0 ? '(' + ((order.shipping_cost + order.taxes) / order.available_count).toFixed(2) + '€/disque)' : ''"></div>
                </div>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💸</span>
                    <span class="text-lg font-bold" 
                          :class="order.discount && order.discount > 0 ? 'text-green-600' : 'text-gray-400'"
                          x-text="order.discount && order.discount > 0 ? order.discount.toFixed(2) + '€' : '0€'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Discount</span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">🏠 Localisation</span>
                <span class="text-sm font-bold text-gray-900" x-text="order.user_location || 'N/A'"></span>
            </div>

            <div class="p-2 rounded text-center flex flex-col items-center justify-center min-h-[60px]"
                 :class="order.paypal_link ? 'bg-blue-100 cursor-pointer hover:bg-blue-200' : 'bg-gray-100'"
                 @click="order.paypal_link ? window.open(order.paypal_link, '_blank') : null">
                <div x-show="order.paypal_link" class="flex flex-col items-center">
                    <svg class="w-4 h-4 mb-1" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.543-.676c-.95-1.09-2.754-1.38-4.61-1.38H8.89c-.524 0-.968.382-1.05.9L6.32 19.337h4.676l1.12-7.106c.082-.518.526-.9 1.05-.9h2.19c3.61 0 6.4-1.38 7.2-5.4.1-.5.2-1.1.2-1.7z"/>
                    </svg>
                    <span class="text-sm font-bold text-blue-600">PayPal.me</span>
                </div>
                <div x-show="!order.paypal_link" class="flex flex-col items-center">
                    <span class="text-xs font-medium text-gray-700 mb-1">PayPal.me</span>
                    <span class="text-sm font-bold text-gray-400">N/A</span>
                </div>
            </div>
        </div>

        <!-- Desktop Layout: 6 columns with specific ordering -->
        <div class="hidden xl:grid grid-cols-6 gap-2">
            <!-- Row 1: discs, participants, time remaining, space, creator, paiement style -->
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💿</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.available_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Disques</span>
            </div>
            
            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">👥</span>
                    <span class="text-lg font-bold text-gray-900" x-text="order.participants_count"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Participants</span>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">🕒</span>
                    <span class="text-sm font-bold text-gray-900" 
                          x-text="order.deadline ? Math.max(0, Math.ceil((new Date(order.deadline) - new Date()) / (1000 * 60 * 60 * 24))) + 'j' : 'N/A'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Restants</span>
            </div>

            <!-- Empty space -->
            <div></div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">Créateur</span>
                <div class="flex items-center space-x-1">
                    <span class="text-sm">👑</span>
                    <a x-show="order.creator?.mutual_order_username" 
                       :href="'/@' + order.creator.mutual_order_username" 
                       class="text-sm font-bold text-blue-600 hover:text-blue-800 hover:underline" 
                       x-text="'@' + order.creator.mutual_order_username"></a>
                    <span x-show="!order.creator?.mutual_order_username" 
                          class="text-sm font-bold text-gray-900" 
                          x-text="order.creator?.username || 'N/A'"></span>
                </div>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">💳 Paiement</span>
                <span class="text-sm font-bold text-gray-700" x-text="order.payment_timing"></span>
            </div>

            <!-- Row 2: frais de port (2 columns), discount, space, city, paypal.me -->
            <div class="col-span-2 p-2 bg-gray-100 rounded flex flex-row items-center justify-between min-h-[60px]">
                <div class="flex items-center space-x-1">
                    <span class="text-sm">📦</span>
                    <span class="text-sm font-medium text-gray-700">Frais de port :</span>
                </div>
                <div class="text-right">
                    <div class="text-lg font-bold text-gray-900" x-text="(order.shipping_cost + order.taxes).toFixed(2) + '€'"></div>
                    <div class="text-xs text-gray-500" 
                         x-text="order.available_count > 0 ? '(' + ((order.shipping_cost + order.taxes) / order.available_count).toFixed(2) + '€/disque)' : ''"></div>
                </div>
            </div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <div class="flex items-center space-x-1 mb-1">
                    <span class="text-sm">💸</span>
                    <span class="text-lg font-bold" 
                          :class="order.discount && order.discount > 0 ? 'text-green-600' : 'text-gray-400'"
                          x-text="order.discount && order.discount > 0 ? order.discount.toFixed(2) + '€' : '0€'"></span>
                </div>
                <span class="text-xs font-medium text-gray-700">Discount</span>
            </div>

            <!-- Empty space -->
            <div></div>

            <div class="p-2 bg-gray-100 rounded text-center flex flex-col items-center justify-center min-h-[60px]">
                <span class="text-xs font-medium text-gray-700 mb-1">🏠 Localisation</span>
                <span class="text-sm font-bold text-gray-900" x-text="order.user_location || 'N/A'"></span>
            </div>

            <div class="p-2 rounded text-center flex flex-col items-center justify-center min-h-[60px]"
                 :class="order.paypal_link ? 'bg-blue-100 cursor-pointer hover:bg-blue-200' : 'bg-gray-100'"
                 @click="order.paypal_link ? window.open(order.paypal_link, '_blank') : null">
                <div x-show="order.paypal_link" class="flex flex-col items-center">
                    <svg class="w-4 h-4 mb-1" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.543-.676c-.95-1.09-2.754-1.38-4.61-1.38H8.89c-.524 0-.968.382-1.05.9L6.32 19.337h4.676l1.12-7.106c.082-.518.526-.9 1.05-.9h2.19c3.61 0 6.4-1.38 7.2-5.4.1-.5.2-1.1.2-1.7z"/>
                    </svg>
                    <span class="text-sm font-bold text-blue-600">PayPal.me</span>
                </div>
                <div x-show="!order.paypal_link" class="flex flex-col items-center">
                    <span class="text-xs font-medium text-gray-700 mb-1">PayPal.me</span>
                    <span class="text-sm font-bold text-gray-400">N/A</span>
                </div>
            </div>
        </div>
    </div>
</div>